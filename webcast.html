<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #f0f0f0;
        }
    </style>
    <script src='js/konva.min.js'></script>
    <script src='js/webscrle.js'></script>
</head>
<body>
<div id="container"></div>
</body>
</html>
<script>
    window.onload = function(){
        //得到舞台的宽高
        var width = window.innerWidth;
        var height = window.innerHeight;
        //得到圆心点
        var centerX = width / 2;
        var centerY = height / 2;

        //1.0舞台
        var stage = new Konva.Stage({
            container: "container",
            width: width,
            height: height
        });
        //2.0创建层
        var layer = new Konva.Layer();

        //3.0创建三个组：背景，顺时针，逆时针
        var bgGroup = new Konva.Group({
            x: 0,
            y: 0
        });
        var animateRight = new Konva.Group({
            x: centerX,
            y: centerY
        });
        var animateLeft = new Konva.Group({
            x: centerX,
            y: centerY
        });

        //4绘制虚线大圆
        var outerCircle = new Konva.Circle({
            x: stage.width() / 2,
            y: stage.height() / 2,
            radius: 388 / 2,
            stroke: 'red',
            strokeWidth: 2,
            // opacity: 0.5,
            dash: [4,8]
        });
        //绘制虚线中圆
        var middleCircle = new Konva.Circle({
            x: stage.width() / 2,
            y: stage.height() / 2,
            radius: 246 / 2,
            stroke: 'green',
            strokeWidth: 2,
            // opacity: 0.5,
            dash: [4,6]
        });
        //5.0绘制虚线小圆
        var smallCircle = new Konva.Circle({
            x: stage.width() / 2,
            y: stage.height() / 2,
            radius: 226 / 2,
            stroke: 'blue',
            strokeWidth: 2,
            // opacity: 0.5,
            dash: [8,6]
        });
        //6.0绘制实心圆
        var fullCircle = new Konva.Circle({
            x: stage.width() / 2,
            y: stage.height() / 2,
            radius: 120 / 2,
            fill: "#2A3466"
            // opacity: 0.5,
        });
        //7.0绘制圆环
        var ring = new Konva.Ring({
            x: stage.width() / 2,
            y: stage.height() / 2,
            innerRadius: 120 / 2,
            outerRadius: 160 / 2,
            fill: '#000',
            opacity: 0.3
        });
        //8.0绘制文字
        var simpleText = new Konva.Text({
            x: stage.width() / 2 - 60,
            y: stage.height() / 2 - 8,
            text: 'Web全栈',
            fontSize: 16,
            fontFamily: '微软雅黑',
            strokeWidth: 1,
            stroke: 'white',
            align: "center",
            width: 120
        });

        bgGroup.add(ring);
        bgGroup.add(fullCircle);
        bgGroup.add(smallCircle);
        bgGroup.add(middleCircle);
        bgGroup.add(outerCircle);
        bgGroup.add(simpleText);
        //绘制animateLeft的内容
        var css3 = new Cirecle({
            x: Math.cos( 90 * Math.PI / 180) * 113,
            y: Math.sin( 90 * Math.PI / 180) * 113,
            innerRadius: 64 / 2,
            outerRadius: 78 / 2,
            innerColor: "yellow",
            outerColor: "#ccc",
            innerOpacity: 0.7,
            outerOpacity: 0.2,
            text: "css3",
            fontSize: 16,
            color: "black"
        });
        css3.addToGroupOrLayer(animateLeft);
        //绘制animateLeft的内容
        var JQuery =new Cirecle({
            x: Math.cos( 180 * Math.PI / 180) * 113,
            y: Math.sin( 180* Math.PI / 180) * 113,
            innerRadius: 64 / 2,
            outerRadius: 78 / 2,
            innerColor: "bule",
            outerColor: "#ccc",
            innerOpacity: 0.7,
            outerOpacity: 0.2,
            text: "JQuery",
            fontSize: 16,
            color: "yellow"
        })
        JQuery.addToGroupOrLayer(animateLeft);
        //绘制animateLeft的内容
        var NodeJs=new Cirecle({
            x: Math.cos( 270 * Math.PI / 180) * 113,
            y: Math.sin( 270* Math.PI / 180) * 113,
            innerRadius: 64 / 2,
            outerRadius: 78 / 2,
            innerColor: "red",
            outerColor: "#ccc",
            innerOpacity: 0.7,
            outerOpacity: 0.2,
            text: "NodeJs",
            fontSize: 16,
            color: "yellow"
        });
        NodeJs.addToGroupOrLayer(animateLeft);
        //绘制animateLeft的内容
        var Html=new Cirecle({
            x: Math.cos( 0 * Math.PI / 180) * 113,
            y: Math.sin( 0* Math.PI / 180) * 113,
            innerRadius: 64 / 2,
            outerRadius: 78 / 2,
            innerColor: "pink",
            outerColor: "#ccc",
            innerOpacity:.9,
            outerOpacity: 0.2,
            text: "Html",
            fontSize: 16,
            color: "black"
        })
        Html.addToGroupOrLayer(animateLeft)
        //绘制animateRight的内容
        var WebApp=new Cirecle({
            x: Math.cos( 0 * Math.PI / 180) * 193,
            y: Math.sin( 0* Math.PI / 180) * 193,
            innerRadius: 64 / 2,
            outerRadius: 78 / 2,
            innerColor: "#22DF22",
            outerColor: "#ccc",
            innerOpacity: 0.7,
            outerOpacity: 0.2,
            text: "WebApp",
            fontSize: 16,
            color: "yellow"
        });
        WebApp.addToGroupOrLayer(animateRight);
        var RectJS=new Cirecle({
            x: Math.cos( 115 * Math.PI / 180) * 193,
            y: Math.sin( 115* Math.PI / 180) * 193,
            innerRadius: 64 / 2,
            outerRadius: 78 / 2,
            innerColor: "#66AB99",
            outerColor: "#ccc",
            innerOpacity: 0.7,
            outerOpacity: 0.2,
            text: "RectJS",
            fontSize: 16,
            color: "#22DF22"
        });
        RectJS.addToGroupOrLayer(animateRight)
        var Canvas=new Cirecle({
            x: Math.cos( 222 * Math.PI / 180) * 193,
            y: Math.sin( 222* Math.PI / 180) * 193,
            innerRadius: 64 / 2,
            outerRadius: 78 / 2,
            innerColor: "#50FEDF",
            outerColor: "#ccc",
            innerOpacity: 0.7,
            outerOpacity: 0.2,
            text: "Canvas",
            fontSize: 16,
            color: "#22DF22"
        });
        Canvas.addToGroupOrLayer(animateRight)
        layer.add(bgGroup);
        layer.add(animateLeft);
        layer.add(animateRight);
        //控制小球每秒转多少度
        var rotateAngle=90;
        var animate=new Konva.Animation(function (frame) {
            var temple = rotateAngle * frame.timeDiff / 1000;
            var scale = Math.sin(frame.time * 2 * Math.PI /3000) + 0.001;
            animateLeft.scaleY(scale);
            animateLeft.rotate(-temple);
            animateLeft.getChildren().each(function (item,index) {
                item.rotate(temple)
            });
            animateRight.rotate(temple);
            animateRight.getChildren().each(function (item,index) {
                item.rotate(-temple)
            });
        },layer)
        animate.start();
        stage.add(layer);
        layer.on('mouseover', function () {
            rotateAngle=80;
        });
        layer.on('mouseout', function () {
            rotateAngle=155;
        });
    }
</script>